<!DOCTYPE html>
<html lang="en"></html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width-devide-width, initian-scale=1.0">
    <title>esercizio_3</title>
</head>
<body>
    
    <div class="timer"></div>

    <script>
        var i = (sessionStorage.getItem("count")) ? sessionStorage.getItem("count") : 0; // variabile i confrontata tra il valore 
                                                                                         //0 oppure nessun valore

        setInterval(conta, 1000);           //setInterval associato alla funzione "conta" che da un ciclo per la funzione 
                                            //ogni 1000 ms

        function conta(){                   //inizializzo funzione conta

            i++;                            // aumenta i ad ogni 1000 ms(setInterval)

            document.querySelector(".timer").innerHTML = i + " secondi di sessione aperta";     //stampa su html
            sessionStorage.setItem("count", i);                                                 //salva su storage
        }

        var addBtn;
var taskTxt;
var taskListHTML;
var tasksList = [];
// dichiara le variabili
window.addEventListener("load", init);                      
// al caricamento della pagina chiama la funzione init
function init(){
    addBtn = document.querySelector("#add_btn");
    taskTxt = document.querySelector("#task_txt");
    taskListHTML = document.querySelector("#tasks_list_html");
    // aggancia alle variabili gli oggetti html 
    addBtn.addEventListener("click", addTask);
    // si mette in ascolto in attesa di un evento click sul bottone
    // quando avviene il click chiama addtask
}

function addTask(){
    tasksList.push(taskTxt.value);
    // inserisce nell'array tasklist il valore scritto nell'input
    // chiama le 2 funzioni sotto
    buildList();
    clearForms();
}

function buildList(){
    var list = "";
    // pulisce la stringa
    for(var i=0; i < tasksList.length; i++){
        // fa il ciclo sull'array ottenuto sopra
        list += "<li>" + tasksList[i] + "</li>";
    }
    // inserisce l'html nella pagina
    taskListHTML.innerHTML = list;
    clearForms();       // pulisce ogni volta
}

function clearForms(){
    taskTxt.value = ''; // pulisce al caricamento
}
              





    </script>
</body>

